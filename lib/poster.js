!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("vue")):"function"==typeof define&&define.amd?define(["vue"],t):(e=e||self).VuePoster=t(e.Vue)}(this,(function(e){"use strict";function t(e,t){var n,o,r,i,a={label:0,sent:function(){if(1&r[0])throw r[1];return r[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,o&&(r=2&i[0]?o.return:i[0]?o.throw||((r=o.return)&&r.call(o),0):o.next)&&!(r=r.call(o,i[1])).done)return r;switch(o=0,r&&(i=[2&i[0],r.value]),i[0]){case 0:case 1:r=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,o=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(r=(r=a.trys).length>0&&r[r.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!r||i[1]>r[0]&&i[1]<r[3])){a.label=i[1];break}if(6===i[0]&&a.label<r[1]){a.label=r[1],r=i;break}if(r&&a.label<r[2]){a.label=r[2],a.ops.push(i);break}r[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],o=0}finally{n=r=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}var n=(e=e&&e.hasOwnProperty("default")?e.default:e).extend({name:"poster-loading",props:{color:String,backgroundColor:String}});var o,r=function(e,t,n,o,r,i,a,s,d,l){"boolean"!=typeof a&&(d=s,s=a,a=!1);var c,u="function"==typeof n?n.options:n;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,r&&(u.functional=!0)),o&&(u._scopeId=o),i?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),t&&t.call(this,d(e)),e&&e._registeredComponents&&e._registeredComponents.add(i)},u._ssrRegister=c):t&&(c=a?function(){t.call(this,l(this.$root.$options.shadowRoot))}:function(e){t.call(this,s(e))}),c)if(u.functional){var f=u.render;u.render=function(e,t){return c.call(t),f(e,t)}}else{var p=u.beforeCreate;u.beforeCreate=p?[].concat(p,c):[c]}return n},i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());var a={};var s=function(e){return function(e,t){return function(e,t){var n=i?t.media||"default":e,r=a[n]||(a[n]={ids:new Set,styles:[]});if(!r.ids.has(e)){r.ids.add(e);var s=t.source;if(t.map&&(s+="\n/*# sourceURL="+t.map.sources[0]+" */",s+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t.map))))+" */"),r.element||(r.element=document.createElement("style"),r.element.type="text/css",t.media&&r.element.setAttribute("media",t.media),void 0===o&&(o=document.head||document.getElementsByTagName("head")[0]),o.appendChild(r.element)),"styleSheet"in r.element)r.styles.push(s),r.element.styleSheet.cssText=r.styles.filter(Boolean).join("\n");else{var d=r.ids.size-1,l=document.createTextNode(s),c=r.element.childNodes;c[d]&&r.element.removeChild(c[d]),c.length?r.element.insertBefore(l,c[d]):r.element.appendChild(l)}}}(e,t)}};const d=n;var l=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"v-poster-loading",style:{backgroundColor:this.backgroundColor}},[t("div",{staticClass:"v-poster-loading__icon",style:{color:this.color}})])};l._withStripped=!0;var c=r({render:l,staticRenderFns:[]},(function(e){e&&e("data-v-b281b21c_0",{source:"\n.v-poster-loading {\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background-color: rgba(0, 0, 0, 0.7);\n}\n.v-poster-loading__icon {\n  color: #bdbdbd;\n}\n.v-poster-loading__icon,\n.v-poster-loading__icon:after {\n  position: absolute;\n  top: 50%;\n  left: 50%;\n  width: 16px;\n  height: 16px;\n  border: 2px solid currentColor;\n  border-top-color: transparent;\n  border-radius: 50%;\n  -webkit-transform: translate(-50%, -50%);\n          transform: translate(-50%, -50%);\n  -webkit-animation: VPosterLoading 0.4s linear infinite;\n          animation: VPosterLoading 0.4s linear infinite;\n}\n@-webkit-keyframes VPosterLoading {\n0% { -webkit-transform: translate(-50%, -50%) rotate(0deg); transform: translate(-50%, -50%) rotate(0deg);\n}\n100% { -webkit-transform: translate(-50%, -50%) rotate(360deg); transform: translate(-50%, -50%) rotate(360deg);\n}\n}\n@keyframes VPosterLoading {\n0% { -webkit-transform: translate(-50%, -50%) rotate(0deg); transform: translate(-50%, -50%) rotate(0deg);\n}\n100% { -webkit-transform: translate(-50%, -50%) rotate(360deg); transform: translate(-50%, -50%) rotate(360deg);\n}\n}\n",map:void 0,media:void 0})}),d,void 0,!1,void 0,s,void 0);"undefined"!=typeof window&&window.Vue&&e.component("poster-loading",c);var u=document.createElement("canvas"),f=u.getContext("2d"),p=1;const h=e.extend({name:"poster",props:{posterClass:String,width:Number,height:Number,ratio:Number,type:String,quality:Number,backgroundColor:String},data:function(){return{elements:[],imageDate:""}},components:{Loading:c},methods:{drawPoster:function(){var e,t;this.imageDate=(e=this.type,t=this.quality,u.toDataURL("png"===e?"image/png":"image/jpeg",t||1))}},watch:{elements:function(e){return n=this,o=void 0,i=function(){var n;return t(this,(function(t){switch(t.label){case 0:n=0,t.label=1;case 1:return n<e.length?[4,e[n](u,f)]:[3,4];case 2:t.sent(),t.label=3;case 3:return n++,[3,1];case 4:return this.drawPoster(),[2]}}))},new((r=void 0)||(r=Promise))((function(e,t){function a(e){try{d(i.next(e))}catch(e){t(e)}}function s(e){try{d(i.throw(e))}catch(e){t(e)}}function d(t){t.done?e(t.value):new r((function(e){e(t.value)})).then(a,s)}d((i=i.apply(n,o||[])).next())}));
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */
var n,o,r,i}},created:function(){var e=this;this.$on("on-poster-element-mounted",(function(t){e.elements.push(t)}))},mounted:function(){var e,t,n,o,r,i,a,s;e={width:this.width,height:this.height,ratio:this.ratio,backgroundColor:this.backgroundColor},t=e.width,n=void 0===t?300:t,o=e.height,r=void 0===o?300:o,i=e.ratio,a=void 0===i?1:i,s=e.backgroundColor,p=a,u.width=n*p,u.height=r*p,f.scale(p,p),"string"==typeof s&&(f.fillStyle=s,f.fillRect(0,0,n*p,r*p))}});var m=function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"v-poster-wrapper"},[this.imageDate?t("img",{class:this.posterClass,attrs:{src:this.imageDate}}):this._t("loading",[t("Loading")]),this._v(" "),this._t("default")],2)};m._withStripped=!0;var g=r({render:m,staticRenderFns:[]},void 0,h,void 0,!1,void 0,void 0,void 0);return"undefined"!=typeof window&&window.Vue&&e.component("poster",g),g}));
